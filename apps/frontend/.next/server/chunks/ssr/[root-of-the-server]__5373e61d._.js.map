{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ihanl/OneDrive/Desktop/Parttime-work/Ekaloka/apps/frontend/context/AppContext.jsx"],"sourcesContent":["\"use client\";\r\nimport axios from \"axios\";\r\nimport { createContext, useContext, useEffect, useState } from \"react\";\r\n\r\nexport const AppContext = createContext();\r\n\r\nexport const useAppContext = () => {\r\n    return useContext(AppContext)\r\n}\r\n\r\nexport const AppContextProvider = (props) => {\r\n\r\n    const url = \"http://localhost:4000\"\r\n    const [products, setProducts] = useState([])\r\n    const [cartItems, setCartItems] = useState({})\r\n\r\n    const fetchProductList = async () => {\r\n        const response = await axios.get(`${url}/api/product/list`);\r\n        if (response.data.success) {\r\n            setProducts(response.data.data)\r\n        }\r\n    }\r\n\r\n    const addToCart = (itemId) => {\r\n        if (!cartItems[itemId]) {\r\n            setCartItems((prev) => ({ ...prev, [itemId]: 1 }))\r\n        }\r\n        else {\r\n            setCartItems((prev) => ({ ...prev, [itemId]: prev[itemId] + 1 }))\r\n        }\r\n    }\r\n\r\n    const removeFromCart = (itemId) => {\r\n        setCartItems((prev) => ({ ...prev, [itemId]: prev[itemId] - 1 }))\r\n    }\r\n\r\n    const getTotalCartAmount = () => {\r\n        let totalAmount = 0;\r\n        for (const item in cartItems) {\r\n            if (cartItems[item] > 0) {\r\n                let itemInfo = products.find((product) => product._id === item);\r\n                totalAmount += itemInfo.price * cartItems[item];\r\n            }\r\n        }\r\n        return totalAmount;\r\n    }\r\n\r\n    useEffect(() => {\r\n        async function loadData() {\r\n            await fetchProductList();\r\n        }\r\n        loadData();\r\n    }, [])\r\n\r\n    const contextValue = {\r\n        products,\r\n        cartItems,\r\n        setCartItems,\r\n        addToCart,\r\n        removeFromCart,\r\n        getTotalCartAmount,\r\n        url\r\n    }\r\n\r\n    return (\r\n        <AppContext.Provider value={contextValue}>\r\n            {props.children}\r\n        </AppContext.Provider>\r\n    )\r\n\r\n}"],"names":[],"mappings":";;;;;;AACA;AACA;AAFA;;;;AAIO,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD;AAE/B,MAAM,gBAAgB;IACzB,OAAO,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;AACtB;AAEO,MAAM,qBAAqB,CAAC;IAE/B,MAAM,MAAM;IACZ,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,CAAC;IAE5C,MAAM,mBAAmB;QACrB,MAAM,WAAW,MAAM,qIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,GAAG,IAAI,iBAAiB,CAAC;QAC1D,IAAI,SAAS,IAAI,CAAC,OAAO,EAAE;YACvB,YAAY,SAAS,IAAI,CAAC,IAAI;QAClC;IACJ;IAEA,MAAM,YAAY,CAAC;QACf,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;YACpB,aAAa,CAAC,OAAS,CAAC;oBAAE,GAAG,IAAI;oBAAE,CAAC,OAAO,EAAE;gBAAE,CAAC;QACpD,OACK;YACD,aAAa,CAAC,OAAS,CAAC;oBAAE,GAAG,IAAI;oBAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,GAAG;gBAAE,CAAC;QACnE;IACJ;IAEA,MAAM,iBAAiB,CAAC;QACpB,aAAa,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,GAAG;YAAE,CAAC;IACnE;IAEA,MAAM,qBAAqB;QACvB,IAAI,cAAc;QAClB,IAAK,MAAM,QAAQ,UAAW;YAC1B,IAAI,SAAS,CAAC,KAAK,GAAG,GAAG;gBACrB,IAAI,WAAW,SAAS,IAAI,CAAC,CAAC,UAAY,QAAQ,GAAG,KAAK;gBAC1D,eAAe,SAAS,KAAK,GAAG,SAAS,CAAC,KAAK;YACnD;QACJ;QACA,OAAO;IACX;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,eAAe;YACX,MAAM;QACV;QACA;IACJ,GAAG,EAAE;IAEL,MAAM,eAAe;QACjB;QACA;QACA;QACA;QACA;QACA;QACA;IACJ;IAEA,qBACI,8OAAC,WAAW,QAAQ;QAAC,OAAO;kBACvB,MAAM,QAAQ;;;;;;AAI3B","debugId":null}}]
}